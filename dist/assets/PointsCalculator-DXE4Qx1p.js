import{u as w,r as n,j as e,m as r,C as P,a as k,b as S,c as U,d as E,I as R,B as g,e as d,f as A}from"./index-crHYdWD_.js";import{a as f}from"./api-DrEb5kD7.js";function G({onProfileScanned:y}){const{setCalculationResult:m,setProfileUrl:j,setIsCalculating:N}=w(),[s,h]=n.useState(""),[t,p]=n.useState(null),[x,c]=n.useState(!1),[i,v]=n.useState([]),[u,l]=n.useState(null),b=async()=>{if(s.trim()){c(!0),l(null);try{N(!0),j(s);const a=await f.calculatePoints(s);a.success?(p(a.user.points),m(a),i.includes(s)||v([...i,s]),y()):l("Failed to calculate points. Please check your profile URL.")}catch(a){console.error("Error calculating points:",a),l("Failed to calculate points. Please try again later.")}c(!1)}},C=async a=>{h(a),c(!0),l(null);try{const o=await f.calculatePoints(a);o.success?(p(o.user.points),m(o)):l("Failed to load saved profile.")}catch(o){console.error("Error loading saved profile:",o),l("Failed to connect to the server.")}c(!1)};return e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"container max-w-4xl mx-auto px-4",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-3",children:["Your Ultimate ",e.jsx("span",{className:"text-gradient",children:"Google Cloud Arcade"})," Companion"]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Track your progress, analyze your achievements, and stay ahead in the Arcade with ArcadeVerse."})]}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(P,{className:"google-card overflow-hidden",children:[e.jsxs(k,{className:"google-gradient",children:[e.jsx(S,{className:"text-xl text-gray-800 dark:text-white",children:"Calculate Your Arcade Points"}),e.jsx(U,{className:"text-gray-700 dark:text-white/80",children:"Enter your Google Cloud SkillBoost profile URL to calculate your Arcade Points instantly!"})]}),e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"profile-url",className:"text-sm font-medium",children:"Enter your SkillBoost profile URL:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{id:"profile-url",placeholder:"https://www.cloudskillsboost.google/public_profiles/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",value:s,onChange:a=>h(a.target.value),className:"flex-1"}),e.jsx(g,{onClick:b,disabled:x||!s.trim(),className:"google-button bg-blue-700 dark:bg-primary text-white hover:bg-blue-800 dark:hover:bg-primary/90",children:x?"Calculating...":"Calculate"})]}),e.jsxs(r.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"text-green-600 dark:text-green-500",children:"âœ“"})," No need to enter your profile URL again! Your accounts are saved, so you can switch between multiple profiles effortlessly."]})]}),u&&e.jsx(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-4 bg-red-50 dark:bg-red-900/20 p-4 rounded-lg text-center",children:e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),t!==null&&!u&&e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-6 bg-accent/10 p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Your calculated Arcade Points"}),e.jsx("div",{className:"text-4xl font-bold text-primary",children:t}),e.jsx(r.div,{initial:{width:0},animate:{width:`${Math.min(t,100)}%`},transition:{delay:.3,duration:1},className:"mt-2 bg-primary/20 h-2 rounded-full overflow-hidden w-full",children:e.jsx("div",{className:"bg-primary h-full rounded-full",style:{width:`${Math.min(t,100)}%`}})}),e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[t>=90?e.jsx(d,{className:"bg-google-green",children:"Excellent"}):t>=80?e.jsx(d,{className:"bg-google-blue",children:"Great"}):e.jsx(d,{className:"bg-google-yellow",children:"Good"}),e.jsxs(d,{variant:"outline",children:["Rank: ",t>=90?"Top 10%":t>=80?"Top 25%":"Top 50%"]})]})]}),i.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Saved Profiles:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>e.jsxs(g,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>C(a),disabled:x,children:["Profile ",i.indexOf(a)+1]},a))})]})]})}),e.jsx(A,{className:"bg-muted/50 px-6 py-4 text-xs text-muted-foreground",children:"Your data is private and secure. We don't store your profile information."})]})})]})})}export{G as PointsCalculator};
